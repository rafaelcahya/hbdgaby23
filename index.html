<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="index.css" />
        <title>Selamat Ulang Tahun, Gaby!</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
        <script src="https://unpkg.com/preact@10.5.13/dist/preact.min.js"></script>
        <script src="https://unpkg.com/preact@10.5.13/hooks/dist/hooks.umd.js"></script>
    </head>
    <body>
        <div id="app"></div>
        <script type="module">
            const { h, render, Component } = preact;
            const { useState, useEffect } = preactHooks;

            function App() {
                const [showMessage, setShowMessage] = useState(false);
                const [isPlaying, setIsPlaying] = useState(false);

                useEffect(() => {
                    if (showMessage) {
                        anime.timeline({ loop: false }).add({
                            targets: ".animate-text",
                            opacity: [0, 1],
                            translateY: [20, 0],
                            easing: "easeOutExpo",
                            duration: 1200,
                            delay: (el, i) => 300 + 30 * i,
                        });
                    }
                }, [showMessage]);

                const handlePlay = () => {
                    const audio = document.getElementById("birthdaySong");
                    audio.play();
                    setShowMessage(true);
                    setIsPlaying(true);
                };

                const handleReadMore = (e) => {
                    e.preventDefault();
                    const audio = document.getElementById("birthdaySong");
                    localStorage.setItem("audioTime", audio.currentTime);
                    window.location.href = "letter.html";
                };

                return h("div", null, [
                    showMessage &&
                        h("div", { class: "message" }, [
                            h("p", { class: "animate-text" }, "✝"),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Hari ini adalah hari yang spesial bagimu!"
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Ada banyak orang yang mengucapi kamu dan aku mau jadi salah satu diantaranya, bahkan ingin menjadi yang pertama buat kamu"
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Aku hanya bisa memberikan hadiah kecil dan kalimat sederhana, yang dibuat dengan perasaan yang luar biasa."
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Ada memori indah yang tersimpan di galeri, catatan, dan kepalaku sendiri"
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Berharap yang terbaik untukmu, aku berdoa untuk itu"
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Get every single thing that you deserve"
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Become the person that you want to be"
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "May your all soons come to finally"
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Happy Birthday, Gaby!"
                            ),
                            h("p", { class: "animate-text" }, "✝"),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Pada hari Minggu 15 September 2024.."
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Aku langitkan semua doa terbaikku untukmu"
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Semoga hal-hal yang membuatmu lelah menjadi ringan"
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Semoga duniamu selalu menjaga dimanapun kamu berada"
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Semoga harimu dipenuhi bahagia tiada batas"
                            ),
                            h(
                                "p",
                                { class: "animate-text" },
                                "Dan semoga senyum kedua orangtua yang kamu harapkan pelan-pelan akan terlihat"
                            ),
                            h("p", { class: "animate-text" }, "Amin.."),
                            h("p", { class: "animate-text mb" }, "✝"),
                            h("p", { class: "animate-text" }, "Ada lagi yang mau aku ucapin, klik aja dibawah ini"),
                            h("p", { class: "animate-text" }, [
                                h(
                                    "a",
                                    {
                                        href: "letter.html",
                                        id: "readMoreButton",
                                        class: "read-more-button",
                                        onClick: handleReadMore,
                                    },
                                    [
                                        "Baca lagi yuk",
                                    ]
                                ),
                            ]),
                        ]),
                    !isPlaying && h("div", { class: "play-button", onClick: handlePlay },
                        h("svg", { width: "96", height: "96", viewBox: "0 0 24 24" },
                            h("path", { d: "M8 5v14l11-7z", fill: "currentColor" })
                        )
                    ),
                    h("audio", {
                        id: "birthdaySong",
                        src: "./asset/song2.mp3",
                        loop: true,
                    }),
                ]);
            }

            render(h(App), document.getElementById("app"));
        </script>
    </body>
</html>
